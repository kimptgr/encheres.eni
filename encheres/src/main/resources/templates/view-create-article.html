<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{layouts/layout :: layoutEncheres(
                    navBar=~{},
                    titrePage=~{::h2},
                    contenuPage=~{:: main},
                    linkcss=~{::#css})}"
>
  <head>
    <meta charset="UTF-8" />
    <title>ENI-Enchères</title>
    <link id="css" rel="stylesheet" href="/encheres/css/create-article.css">
  </head>
  <header>
    <nav data-th-replace="~{fragments/fragments-navbar::frag-navbar}"></nav>
  </header>
  <body>
    <h2>Nouvelle vente</h2>
    <main class="center-main">
      <form data-th-action="@{/vendreUnArticle}" method="post" data-th-object="${articleVendu}">
 <!--     <input type="hidden" data-th-name="${_csrf.parameterName}" data-th-value="${_csrf.token}" /> -->
      <label for="article">Article :</label>
      <input
        id="nomArticle"
        type="text"
        name="nomArticle"
        data-th-field="*{nomArticle}"
      />
   <span data-th-if="${#fields.hasErrors('nomArticle')}" data-th-errors="*{nomArticle}"></span>

      <label for="description">Description :</label>
      <textarea 
        id="description" 
        name="description"
        rows="3"
        data-th-field="*{description}"
        >
      </textarea>
      <span data-th-if="${#fields.hasErrors('description')}" data-th-errors="*{description}"></span>

      <label for="categorie">Categorie :</label>
      <select  id="categorie" name="categorie">
        <option 
        data-th-each="category : ${categoriesInSession}" 
        data-th-text="${category.libelle}" 
        data-th-value="${category.noCategorie}"></option>
      </select>

      <label for="miseAPrix">Mise à prix :</label>
      <input
        id="miseAPrix"
        type="number"
        name="miseAPrix"
        data-th-field="*{miseAPrix}"
      />
      <span data-th-if="${#fields.hasErrors('miseAPrix')}" data-th-errors="*{miseAPrix}"></span>

      <label for="dateDebutEncheres">Début de l'enchère :</label>
      <input type="datetime-local" name="dateDebutEncheres" id="dateDebutEncheres" data-th-field="*{dateDebutEncheres}"/>
      <span data-th-if="${#fields.hasErrors('dateDebutEncheres')}" data-th-errors="*{dateDebutEncheres}"></span>

      <label for="dateFinEncheres">Fin de l'enchère :</label>
      <input type="datetime-local" name="dateFinEncheres" id="dateFinEncheres"  data-th-field="*{dateFinEncheres}"/>
      <span data-th-if="${#fields.hasErrors('dateFinEncheres')}" data-th-errors="*{dateFinEncheres}"></span>
      <fieldset>
        <legend>Retrait</legend>
      <div>
          <label for="rue">Rue :</label>
          <input id="rue" 
          type="text" 
          name="rue"
          data-th-value="${userInSession.rue != null ? userInSession.rue : ''}"
          data-th-field="*{retrait.rue}"
          />
          <span data-th-if="${#fields.hasErrors('retrait.rue')}" data-th-errors="*{retrait.rue}"></span>

          <label for="codePostal">Code postal :</label>
          <input
            id="codePostal"
            type="text"
            name="codePostal"
            data-th-field="*{retrait.codePostal}"
            data-th-value="${userInSession.codePostal != null ? userInSession.codePostal : ''}"
          />
          <span data-th-if="${#fields.hasErrors('retrait.rue')}" data-th-errors="*{retrait.rue}"></span>

          <label for="ville">Ville :</label>
          <input
            id="ville"
            type="text"
            name="ville"
            data-th-field="*{retrait.ville}"
            data-th-value="${userInSession.ville != null ? userInSession.ville : ''}"
          /> 
          <span data-th-if="${#fields.hasErrors('retrait.rue')}" data-th-errors="*{retrait.rue}"></span>
    </div>
      </fieldset>
      <input type="submit">
      <input type="reset" value="Reset" />
    </form>
    </main>
  </body>
</html>

